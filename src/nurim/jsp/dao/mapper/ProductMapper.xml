<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.og/dtd/mybatis-3-mapper.dtd">

<!-- 이 파일의 경로를 config.xml에 명시해야 한다. -->

<!--회원에 대한 CRUD -->
<mapper namespace="ProductMapper">

	<!-- Beans 클래스의 객체이름(id)과 클래스이름(type)을 명시한다. -->
	<resultMap id="product" type="nurim.jsp.model.Product">
		<!-- Beans의 멤버변수(property)이름과 대상 테이블의 컬럼(column)을 연결한다. -->
		<result property="id" column="id" />
		<result property="document_id" column="document_id" />
		<result property="pro_img" column="pro_img" />
		<result property="pro_name" column="pro_name" />
		<result property="category" column="category" />
		<result property="pro_price" column="pro_price" />
		<result property="amount" column="amount" />
		<result property="pro_hit" column="pro_hit" />
		<result property="reg_date" column="reg_date" />
		<result property="edit_date" column="edit_date"/>
		<result property="provider" column="provider" />
		<result property="content" column="content" />
	</resultMap>
	
	<select id="selectProductCount" parameterType="nurim.jsp.model.Product"
	resultType="int">
	SELECT
	COUNT(id) FROM Product
	</select>
	
	<select id="selectProductList" parameterType="nurim.jsp.model.Product"
	resultMap="product">
	SELECT
	id,pro_img,pro_name,pro_price,amount,pro_hit,reg_date,
	edit_date,provider,document_id,category,content
	FROM product 
	<where>
	<if test="pro_name != null">
	 pro_name LIKE concat('%',#{pro_name},'%')
	</if>
	</where>
	ORDER BY id DESC
	LIMIT #{limitStart},#{listCount}	
	</select>
	
	<insert id="insertProductItem" parameterType="nurim.jsp.model.Product"
	useGeneratedKeys="true" keyProperty="id">
	INSERT INTO product(
	pro_img,pro_name,pro_price,amount,pro_hit,
	reg_date,edit_date,provider,document_id,category,
	content)
	VALUES(
	#{pro_img},#{pro_name},#{pro_price},#{amount},0,
	now(),now(),#{provider},null,#{category},#{content}
	)
	</insert>
</mapper>
